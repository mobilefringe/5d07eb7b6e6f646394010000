var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e};require.config({paths:{Vue:"https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.13/vue",vue_router:"https://cdnjs.cloudflare.com/ajax/libs/vue-router/2.7.0/vue-router.min",axios:"https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.1/axios.min",jquery:"https://code.jquery.com/jquery-3.2.1.min",lodash:"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min",moment:"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment-with-locales.min","moment-timezone":"https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.14/moment-timezone-with-data-2012-2022.min","vue2-filters":"https://cdn.jsdelivr.net/vue2-filters/0.1.8/vue2-filters.min",vue:"https://mmvue.codecloudapp.com/require-vuejs.min",vuex:"https://cdnjs.cloudflare.com/ajax/libs/vuex/2.3.1/vuex.min","vue-i18n":"https://cdnjs.cloudflare.com/ajax/libs/vue-i18n/6.1.1/vue-i18n.min",text:"https://cdnjs.cloudflare.com/ajax/libs/require-text/2.0.12/text.min",json:"https://unpkg.com/requirejs-plugins-current@1.0.3/src/json","js-cookie":"https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.4/js.cookie.min","vue-meta":"https://unpkg.com/vue-meta@1.0.4/lib/vue-meta.min",Fuse:"https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.0.4/fuse.min",datastore_mutation_types:"https://mmvue.codecloudapp.com/datastore_mutation_types",datastore_getters:"https://mmvue.codecloudapp.com/datastore_getters",datastore_actions:"https://mmvue.codecloudapp.com/datastore_actions",datastore_mutations:"https://mmvue.codecloudapp.com/datastore_mutations",datastore:"https://mmvue.codecloudapp.com/datastore","vue-moment":"https://mmvue.codecloudapp.com/vue-moment",today_hours:"https://mmvue.codecloudapp.com/today_hours.vue?noext","search-component":"https://preview-mmvue.codecloudapp.com/search-component.vue?noext",slick:"https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min","vue-slick":"https://mmvue.codecloudapp.com/slick.vue?noext","vue-select":"https://cdn.jsdelivr.net/npm/vue-select@2.3.0/dist/vue-select.min","vue-social-sharing":"https://cdn.jsdelivr.net/npm/vue-social-sharing@2.3.1/dist/vue-social-sharing.min","vee-validate":"https://cdn.jsdelivr.net/npm/vee-validate@2.1.4/dist/vee-validate","v-calendar":"https://unpkg.com/v-calendar@0.5.1/lib/v-calendar.min",lightbox:"https://mmvue.codecloudapp.com/lightbox","vue-simple-spinner":"https://cdn.jsdelivr.net/npm/vue-simple-spinner@1.2.8/dist/vue-simple-spinner.min","vue-lazy-load":"https://unpkg.com/vue-lazyload/vue-lazyload",masonry:"https://cdnjs.cloudflare.com/ajax/libs/masonry/4.0.0/masonry.pkgd.min","vue-masonry-plugin":"https://cdn.jsdelivr.net/npm/vue-masonry@0.10.16/dist/vue-masonry-plugin","vue-paginate":"https://cdnjs.cloudflare.com/ajax/libs/vue-paginate/3.5.1/vue-paginate",loader:"https://mmvue.codecloudapp.com/loader.vue?noext",campaignMonitor:"https://js.createsend1.com/javascript/copypastesubscribeformlogic","bootstrap-vue":"https://codecloud.cdn.speedyrails.net/sites/59347e776e6f64538f150000/text/javascript/1554736414383/bootstrap-vue","store-masonry":"https://mmvue.codecloudapp.com/storelist_masonry.vue?noext",mousewheel:"https://cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min",mapplic:"https://preview-mmvue.codecloudapp.com/mapplic",hammer:"https://codecloud.cdn.speedyrails.net/sites/59bac7db6e6f644f22ba0000/text/javascript/1484859750000/hammer.min","mapplic-map":"https://preview-mmvue.codecloudapp.com/mapplic.vue?noext"}}),require(["Vue","vuex","vue2-filters","vue_router","routes","datastore","vue-i18n","locales","jquery","moment","vue-meta","moment-timezone","vue-moment","vue-social-sharing","vue-select","vue!search-component","vue-simple-spinner","vue!loader.vue","vue!social_links.vue","vue!header.vue","json!menu_items.json"],function(e,t,s,o,a,n,r,c,i,u,l,m,p,d,h,v,g,f,j,b,y){e.use(l),e.use(o),e.use(s),e.use(r),e.use(d);var x=new o({mode:"history",routes:a,scrollBehavior:function(){return{x:0,y:0}}}),w=new r({locale:"en-ca",fallbackLocale:"en-ca",messages:c});e.component("v-select",h.VueSelect);new e({el:"#app",data:function(){return{dataLoaded:!1,show_mobile_menu:!1,property_logo:"//codecloud.cdn.speedyrails.net/sites/5c54b7e46e6f6447f2000000/image/png/1549056394014/new_sudbury_transparent.png",menu_items:y,search_result:null,suggestionAttribute:"name",newsletter_email:"",stickyMenu:!1,isSticky:350,subdomain:"sevenoaks",twitter_user:"sevenoaks"}},created:function(){var e=this;this.loadData().then(function(){e.locale="en-ca",e.property.default_logo_url="//codecloud.cdn.speedyrails.net/sites/5c54b7e46e6f6447f2000000/image/jpeg/1549475208485/new_sudbury_black.jpg",e.dataLoaded=!0}),window.addEventListener("scroll",this.enableStickyNavbar)},watch:{locale:function(e){this.$i18n.locale=e,u.locale(e)},$route:function(){_.forEach(this.menu_items,function(e){e.show_sub_menu=!1}),this.show_mobile_menu=!1},show_mobile_menu:function(){this.show_mobile_menu===!0?document.body.classList.add("no-scroll"):this.show_mobile_menu===!1&&document.body.classList.remove("no-scroll")}},computed:_extends({locale:{get:function(){return this.$store.state.locale},set:function(e){this.$store.commit("SET_LOCALE",{lang:e})}},copyright_year:function(){return u().year()}},t.mapGetters(["property","timezone","banners","hours","getTodayHours","processedStores"]),{todays_hours:function(){return this.getTodayHours},allStores:function(){return this.processedStores}}),methods:{loadData:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,regeneratorRuntime.awrap(this.$store.dispatch("initializeApi",{site:"sevenoaks",version:"v4"}));case 3:return t.next=5,regeneratorRuntime.awrap(Promise.all([this.$store.dispatch("getData","property")]));case 5:return this.property.mm_host=this.property.mm_host.replace("http:",""),t.next=8,regeneratorRuntime.awrap(Promise.all([this.$store.dispatch("INITIALIZE_LOCALE"),this.$store.dispatch("getData","hours"),this.$store.dispatch("getData","stores"),this.$store.dispatch("getData","promotions"),this.$store.dispatch("getData","events"),this.$store.dispatch("getData","jobs"),this.$store.dispatch("getData","repos")]));case 8:return e=t.sent,t.next=11,regeneratorRuntime.awrap(Promise.all([this.$store.dispatch("LOAD_META_DATA")]));case 11:return t.abrupt("return",e);case 14:t.prev=14,t.t0=t["catch"](0),console.log("Error loading data: "+t.t0.message);case 17:case"end":return t.stop()}},null,this,[[0,14]])},changeLocale:function(e){this.locale=e},onOptionSelect:function(e){this.search_result="",this.$router.push("/stores/"+e.slug)},enableStickyNavbar:function(){this.stickyMenu=window.pageYOffset>=this.isSticky?!0:!1},toggleSubMenu:function(e){this.menu_items.map(function(t){t.name!==e&&(t.show_sub_menu=!1)})},shareURL:function(e,t){console.log("page, slug",e,t);var s="http://www.newsudburycentre.ca/"+e+"/"+t;return s}},destroyed:function(){window.removeEventListener("scroll",this.enableStickyNavbar)},router:x,store:n,i18n:w})});